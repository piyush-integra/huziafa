!function(f){"use strict";var t=function(e,t,n){if(e&&t&&n){var a={value:t,expires_at:(new Date).getTime()+n/1};localStorage.setItem(e.toString(),JSON.stringify(a))}},n=function(e){if(!e)return null;var t=JSON.parse(localStorage.getItem(e.toString()));if(null!==t){if(!(null!==t.expires_at&&t.expires_at<(new Date).getTime()))return t.value;localStorage.removeItem(e.toString())}return null};f(".js-rey-copy-code").on("click",function(e){e.preventDefault();var t=f(e.currentTarget),n=(f(t).text(),f(t).next("pre").text()),a=f("<input>");f("body").append(a),a.val(n).select(),document.execCommand("copy"),a.remove(),t.closest(".rey-codeBlock").addClass("is-copied")}),!_.isUndefined(reyCoreAdmin.back_btn_text)&&_.isUndefined(reyCoreAdmin.back_btn_url)&&f(".post-type-rey-global-sections.post-php a.page-title-action").after(function(){return'<a class="rey-gs-back-button" href="'+reyCoreAdmin.back_btn_url+'">'+reyCoreAdmin.back_btn_text+"</a>"});var e,a,u=!1;window.onbeforeunload=function(){if(u)return"Import is in progress!"},f(".js-rey-refresh-demos").on("click",function(e){e.preventDefault();var a=f(this);a.addClass("--loading").text(reyCoreAdmin.strings.refresh_btn_text),f.ajax({url:reyCoreAdmin.ajax_url,cache:!1,data:{action:"rey_refresh_demos",security:reyCoreAdmin.ajax_nonce},success:function(e){e&&1==e.success&&(a.text(reyCoreAdmin.strings.reloading),setTimeout(function(){location.reload()},1e3))},error:function(e,t,n){a.removeClass("--loading").text(reyCoreAdmin.strings.refresh_demos_error),console.error(e),console.error(t),console.error(n)}})}),f(document).on("ocdiImportComplete",function(){var e=new Audio(reyCoreAdmin.sound_effect);e.oncanplay=function(){e.play()},f(".js-ocdi-ajax-response").length&&f("html, body").animate({scrollTop:f(".js-ocdi-ajax-response").offset.top})}),f(".ocdi__gl-item-image").each(function(e,t){var n=f(t);n.attr("src",n.attr("data-src")).on("load",function(){n.addClass("--loaded")})}),f("#acf-group_5c4ad0bd35b33 .acf-hndle-cog").before('<a href="https://support.reytheme.com/kb/settings-for-individual-page-post-taxonomy-category/" target="_blank" class="acf-rey-help-link">'+reyCoreAdmin.strings.help+"</a>"),f(document).on("ocdiImportComplete ",function(e){f(".js-ocdi-ajax-response").append('<div class="notice notice-success"><p>'+reyCoreAdmin.ocdi_strings.visit_site+"</p></div>"),u=!1,f("body").removeClass("rey-is-importing"),document.title=reyCoreAdmin.ocdi_strings.title_done}),f(document).on("reycore/ocdi/failed_import ",function(e){f(".js-ocdi-ajax-response").append('<div class="notice notice-error is-dismissible"><p>'+reyCoreAdmin.ocdi_strings.seek_help+"</p></div>"),u=!1,f("body").removeClass("rey-is-importing"),document.title=reyCoreAdmin.ocdi_strings.title_done}),f(document).on("reycore/ocdi/import_demo",function(e,t,n,a,r,i){u=!0,document.title=reyCoreAdmin.ocdi_strings.title_importing;var o=function(){a.dialog("close"),f.ocdiGridLayoutImport(t,n),f("body").addClass("rey-is-importing")},s=[],c=new URL(window.location.href).searchParams.get("page")||"",d=f("#js-plugin-dep--"+i[t].slug).find('input[type="checkbox"]');if(d.length){d.each(function(e,t){f(t).prop("checked")&&s.push(f(t).val()),f(t).prop("disabled",!0)}),r.addClass("disabled"),r.prev(".ui-button").addClass("disabled"),a.closest(".wp-dialog--rey").find(".ui-dialog-titlebar-close").hide(300),a.dialog("option","closeOnEscape",!1),f(".rey-pluginDeps input:checked",a).closest("li").addClass("--is-installing"),a.append("<p class='reyAdmin-response reyAdmin-notice --info'>"+reyCoreAdmin.ocdi_strings.installing_plugins_text+"</p>");var l=function(){f.ajax({method:"post",url:reyCoreAdmin.ajax_url,dataType:"text",cache:!1,data:{action:"rey_install_plugin_dependencies",security:reyCoreAdmin.ajax_nonce,plugins:s,page:c},success:function(e){var t,n=!(!(t=/{("success"[^}]+)}/g.exec(e))||!t.length)&&JSON.parse(t[0]);n?n.success&&!0===n.success&&!1!==n.data?(f(".rey-pluginDeps li[data-slug='"+n.data+"']",a).hide(400),l()):(f(".reyAdmin-response",a).text(reyCoreAdmin.ocdi_strings.finished_installing_plugins),setTimeout(function(){o()},1e3)):(r.removeClass("loading"),f(".reyAdmin-response",a).remove(),a.append("<p class='reyAdmin-response reyAdmin-notice --error'>"+n.data+"</p>"))},error:function(e,t,n){f(".reyAdmin-response",a).remove(),a.append("<p class='reyAdmin-response reyAdmin-notice --error'>"+reyCoreAdmin.ocdi_strings.something_went_wrong+"</p>"),console.error(e),console.error(t),console.error(n)}})};l()}else o()}),function(u){if(void 0!==u){var p={start:[],end:[]};u.control.bind("add",function(e){var t,n,a,r,i,o,s,c,d,l;e.params&&("number"===e.params.type&&e.container.addClass("--wrapped").wrapInner('<div class="control-wrap" />'),"rey_group_start"===e.params.type&&p.start.push(e),"rey_group_end"===e.params.type&&p.end.push(e),"rey-hf-global-section"===e.params.type&&(a=(n=e).container,r=f('.rey-radio-choices input[type="radio"]',a),i=f(".rey-gs-list",a),o=f("select",i),s=f(".rey-gs-links",i),c=f('input[type="hidden"]',a),d=function(e){return"none"!==e&&"default"!==e},l=function(e){c.val(e).trigger("change")},"undefined"!==n.params.choices.global_sections&&Object.keys(n.params.choices.global_sections).length&&"gs"===f('.rey-radio-choices input[type="radio"]:checked',a).val()&&(n.params.value in n.params.choices.global_sections||u(n.id,function(e){e.set(Object.keys(n.params.choices.global_sections)[0])})),r.on("change",function(e){i.toggleClass("--active",d(e.target.value)),d(e.target.value)?l(o.val()):l(e.target.value)}),o.on("change",function(e){var t=e.target.value;f(".rey-gs-linksEdit",s).removeClass("--active"),f('.rey-gs-linksEdit[data-id="'+t+'"]',s).addClass("--active"),l(t)})),"kirki-select"===e.params.type&&((t=e).params.value in t.params.choices||u(t.id,function(e){e.set(t.params.default)})))});f(document).on("reycore/customizer/section_expanded",function(e,t){t.contentContainer;var n=t.controls();f.each(n,function(e,t){"kirki-typography"===t.params.type&&function(e){var t=e.container;if(!f('[data-should-collapse="no"]',t).length&&!f(".rey-cstTypo-wrapper",t).length){t.addClass("rey-cstTypo");var n=f(".wrapper",t),a=f(".font-family select",n),r=f(".font-size input",n),i=f(".variant select",n),o=wp.template("rey-customizer-typo-handler"),s=t.prepend(o({ff:f('option[value="'+a.val()+'"]',a).text(),fz:r.val(),fw:i.val()})),c=f(".rey-cstTypo-btn",s);c.on("click",function(e){e.preventDefault(),f(this).toggleClass("--active"),n.toggleClass("--active")}),a.on("change",function(e){var t=f('option[value="'+f(this).val()+'"]',this).text();f(".rey-cstTypo-ff",s).text(t)}),r.on("change",function(e){f(".rey-cstTypo-fz",s).text(f(this).val())}),i.on("change",function(e){f(".rey-cstTypo-fw",s).text(f(this).val())}),f(document).on("keyup",function(e){27==e.keyCode&&(c.removeClass("--active"),n.removeClass("--active"))})}}(t)})}),u.bind("ready",function(){f.each(p.start,function(e,t){var n=p.end[e];n.container.toggleClass("--is-active",t.params.active),t.active.bind(function(e){n.container.toggleClass("--is-active",e)})}),u.section.each(function(n){n.expanded.bind(function(e){if(e){f(document).trigger("reycore/customizer/section_expanded",n);var t=n.container,a=n.contentContainer;f(".customize-control [data-control-class]",t).each(function(){var e=f(this);e.closest(".customize-control").addClass(e.attr("data-control-class"))}),f.each(p.start,function(e,t){if(f(t.container,a).length){var n=p.end[e];t.container.addClass("--is-grouped"),t.container.nextUntil(n.container).addClass("--is-grouped")}})}})});var e=u.control,c=f(".wp-full-overlay");f(".wp-full-overlay-footer .devices button").on("click",function(){var e=f(this).attr("data-device");f(".customize-control[data-breakpoint]:not(.--conditionally-hidden)",c).css("display","none"),f('.customize-control[data-breakpoint="'+e+'"]:not(.--conditionally-hidden)',c).css("display","list-item")}),e.each(function(r){if(r.params&&void 0!==r.params.is_responsive){var n=f(r.container),a=r.params.is_responsive,i=r.params.required.length;n.attr("data-breakpoint",a);var o=function(){var n="desktop";return f.each(["desktop","tablet","mobile"],function(e,t){c.hasClass("preview-"+t)&&(n=t)}),n};i&&f.each(r.params.required,function(e,t){u(t.setting,function(e){e.bind(function(e){kirkiDependencies.showKirkiControl(r)&&o()!==a&&setTimeout(function(){n.css("display","none")},50)})})});var t=function(t,e){e===o()?i&&kirkiDependencies.showKirkiControl(r)&&t.css("display","list-item"):t.css("display","none");var n=f(".rey-cst-responsiveHandlers",t);if(!n.length){var a=wp.template("rey-customizer-responsive-handler");n=t.prepend(a({device:e})),f("span[data-breakpoint]",n).on("click",function(e){e.preventDefault();var t=f(this).attr("data-breakpoint"),n=f('.wp-full-overlay-footer .devices button[data-device="'+t+'"]');n.length&&n.trigger("click")}),f('span[data-breakpoint="desktop"]',t).on("click",function(e){e.preventDefault(),"desktop"===t.attr("data-breakpoint")&&f(this).parent().toggleClass("--inactive")})}};u.section(r.section(),function(e){e.expanded()||wp.customize.settings.autofocus.control===r.id?t(n,a):e.expanded.bind(function(e){e&&t(n,a)})})}if(r.params&&r.params.inputAttrs&&-1!==r.params.inputAttrs.indexOf("data-needs-unit")&&u(r.id,function(e){e.bind(_.debounce(function(e){"kirki-dimensions"===r.params.type&&_.each(e,function(e,t){if(""!==e&&"px"!==e&&!isNaN(e)){var n=f('input[data-choice="'+t+'"]',r.container),a=n.attr("data-needs-unit");n.val(parseInt(e)+a)}})},500))}),r.params&&"number"===r.params.type){var s=function(e){e.hasClass("--wrapped")||e.addClass("--wrapped").wrapInner('<div class="control-wrap" />')};u.section(r.section(),function(e){e.expanded()||wp.customize.settings.autofocus.control===r.id?s(r.container):e.expanded.bind(function(e){e&&s(r.container)})})}r.id}),f(".js-rey-button").on("click",function(e){var t=f(this),n=t.attr("data-action")||"";n&&(e.preventDefault(),t.addClass("--loading disabled"),f.post({url:reyCoreAdmin.ajax_url,data:{action:n,security:reyCoreAdmin.ajax_nonce},success:function(e){t.removeClass("--loading disabled")},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}}))})})}}(wp.customize),e=f("#tmpl-customize-control-kirki-toggle-content"),a=(a=e.text()).replace("screen-reader-text","screen-reader-text-reyToggle"),e.text(a),"undefined"!=typeof acf&&acf.addAction("ready",function(){var e=acf.getFields();f.each(e,function(e,t){if(t.$el.is(".rey-acf-responsive.--desktop")){var n,a,r=t.$el,i=t.data.name,o=f(".rey-acf-responsiveHandlers",r);if(o.length)return;if(n=r.siblings('[data-name="'+i+'_tablet"]'),a=r.siblings('[data-name="'+i+'_mobile"]'),!n.length&&!a.length)return;var s=wp.template("rey-acf-responsive-handler");o=r.prepend(s({device:!1}));var c=n.addClass("--hidden").prepend(s({device:!1})),d=a.addClass("--hidden").prepend(s({device:!1})),l=function(e){e.preventDefault();var t=f(e.currentTarget).attr("data-breakpoint");"desktop"===t&&(r.removeClass("--hidden"),n.addClass("--hidden"),a.addClass("--hidden")),"tablet"===t&&(r.addClass("--hidden"),n.removeClass("--hidden"),a.addClass("--hidden")),"mobile"===t&&(r.addClass("--hidden"),n.addClass("--hidden"),a.removeClass("--hidden"))};f("span[data-breakpoint]",o).on("click",l),f("span[data-breakpoint]",c).on("click",l),f("span[data-breakpoint]",d).on("click",l)}!function(t){if("gs_type"===t.data.name&&"rey-global-sections"===f('form[id="post"] input#post_type').val()&&"publish"!==f('form[id="post"] input#original_post_status').val()){var n=function(e){f("input#elementor-switch-mode-input").val()||(t.val()||t.val("generic"),f.post({url:reyCoreAdmin.ajax_url,data:{action:"rey_gs_set_type",security:reyCoreAdmin.ajax_nonce,type:e||t.val(),post_id:f('form[id="post"] input#post_ID').val()},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}}))};n(),f('input[type="radio"]',t.$el).on("change",function(e){n(e.target.value)})}}(t)})}),{$wrapper:f(".rey-elManager-wrapper"),allItems:[],itemsNotInUse:[],scannedItems:"rey_scanned_items",init:function(){this.$container=f(".rey-elManager",this.$wrapper),this.$items=f(".rey-elManager-item",this.$container),this.$scanBtn=f(".elManager-scanButton",this.$wrapper),this.$disableUnusedBtn=f(".elManager-disableUnused",this.$wrapper);var n=this;this.$items.each(function(e,t){n.allItems.push(f(t).attr("data-element"))}),this.events()},events:function(){var r=this;f(".rey-toggleSwitch-label",this.$items).on("click",function(e){e.preventDefault();var t=f(this).closest(".rey-elManager-item"),n=f('input[type="checkbox"]',t);t.hasClass("--active")?n.prop("checked",!1).trigger("change"):n.prop("checked",!0).trigger("change")}),f('input[type="checkbox"]',this.$items).on("change",function(e){var t=f(e.target),n=t.closest(".rey-elManager-item"),a=n.attr("data-element");n.addClass("--disabled"),f.ajax({method:"post",url:reyCoreAdmin.ajax_url,data:{action:"change_widget_status",security:reyCoreAdmin.ajax_nonce,status:t.prop("checked"),element:a},success:function(e){e&&e.data&&e.data.length&&(-1!==e.data.indexOf(a)?(n.removeClass("--active"),t.prop("checked",!1)):(n.addClass("--active"),t.prop("checked",!0))),n.removeClass("--disabled")},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})}),this.$scanBtn.on("click",function(e){e.preventDefault();var t=f(this);if(n(r.scannedItems))return r.itemsNotInUse=r.diff(r.allItems,n(r.scannedItems)),void r.finishedScanning();t.addClass("--loading"),f.ajax({method:"get",url:reyCoreAdmin.ajax_url,data:{action:"get_elementor_pages",security:reyCoreAdmin.ajax_nonce},success:function(e){if(e&&e.success&&e.data.length){r.itemsNotInUse=[];var a=e.data.length;f.each(e.data,function(e,t){var n=e===a-1;r.iteratePost(t,n)})}},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})}),this.$disableUnusedBtn.on("click",function(e){e.preventDefault();var t=f(this);t.addClass("--loading"),f.ajax({method:"post",url:reyCoreAdmin.ajax_url,data:{action:"disable_unused_elements",security:reyCoreAdmin.ajax_nonce,items:r.itemsNotInUse},success:function(e){e&&e.success&&e.data.length&&(t.children("span:first-child").text(reyCoreAdmin.strings.reloading),setTimeout(function(){location.reload()},1e3))},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})})},diff:function(e,t){for(var n=[],a=[],r=0;r<e.length;r++)n[e[r]]=!0;for(r=0;r<t.length;r++)n[t[r]]?delete n[t[r]]:n[t[r]]=!0;for(var i in n)a.push(i);return a},iteratePost:function(e,t){var n=this;f.ajax({method:"get",url:reyCoreAdmin.ajax_url,data:{action:"check_elements_status",security:reyCoreAdmin.ajax_nonce,post_id:e},success:function(e){e&&e.success&&e.data&&f.each(e.data,function(e,t){""!=t&&-1===n.itemsNotInUse.indexOf(t)&&n.itemsNotInUse.push(t)}),t&&n.finishedScanning(!0)},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})},finishedScanning:function(e){var n=this;this.$scanBtn.removeClass("--loading"),this.itemsNotInUse.length&&(e&&(this.itemsNotInUse=this.diff(this.allItems,this.itemsNotInUse),t(this.scannedItems,this.itemsNotInUse,3e5)),this.$disableUnusedBtn.show(),f.each(this.itemsNotInUse,function(e,t){f('.rey-elManager-item[data-element="'+t+'"]',n.$wrapper).addClass("--not-in-use")}))}}.init();var r,i=function(o){var s=this;this.init=function(){o=o||f("#widgets-right .widget-content");var t=function(){f("[data-condition]",o).each(function(e,t){var n=f(t),a=JSON.parse(n.attr("data-condition")||"{}"),r=[];if(!f.isEmptyObject(a)){f.each(a,function(e,t){var n=f('[name="'+t.name+'"]',o),a=n.val();n.is('[type="checkbox"]')&&(a=n.prop("checked")),r.push(s.evaluateCondition(t.value,a,t.compare))});var i=r.every(function(e){return!0===e});n.toggleClass("hidden",!i)}})};t(),f("input, select",o).on("change",function(e){t()}),this.priceFilterWidget(o),this.makeTabs(o),this.makeTitle(o)},this.makeTabs=function(e){f(".rey-widgetTabs-wrapper",e).each(function(e,t){var n=f(t),a=f(".rey-widgetTabs-buttons span",n),r=f(".rey-widgetTabs-tabContent",n);a.on("click",function(e){e.preventDefault();var t=f(this).attr("data-tab");a.removeClass("--active"),r.removeClass("--active"),f(this).addClass("--active"),f('.rey-widgetTabs-tabContent[data-tab="'+t+'"]',n).addClass("--active")})})},this.makeTitle=function(e){var a=f(".rey-widgetToTitle",e);a.each(function(e,t){var n=f(t).closest(".widget").find(".widget-title h3");f("<span/>").addClass(a.attr("data-class")||"").html(a.html()).appendTo(n)})},this.priceFilterWidget=function(n){f(".rey-widgetPrice-add",n).on("click",function(e){var t=f(this).closest(".rey-widgetPrice-wrapper"),n=f(".rey-widgetPrice-listWrapper",t);f(".rey-widgetPrice-listEmpty",t).clone().children().appendTo(n)}),f(document).on("click",".rey-widgetPrice-remove",function(e){var t=f(this);t.parent().hasClass("--start")||t.parent().hasClass("--end")||t.parent().hide().remove()}),f.each(["start","end"],function(e,a){f(".rey-widgetPrice-add-"+a,n).on("click",function(e){e.preventDefault();var t=f(this).closest(".rey-widgetPrice-wrapper"),n=f(".rey-widgetPrice-list.--"+a,t);n.removeClass("--hidden"),f('input[type="hidden"]',n).val("1"),f(this).addClass("--inactive")}),f(document).on("click",".rey-widgetPrice-list.--"+a+" .rey-widgetPrice-remove",function(e){e.preventDefault();var t=f(this);t.parent().addClass("--hidden"),f('input[type="hidden"]',t.parent()).val(""),f(".rey-widgetPrice-add-"+a,n).removeClass("--inactive")})})},this.evaluateCondition=function(t,e,n){if("==="===n)return t===e;if("=="===n||"="===n||"equals"===n||"equal"===n)return t==e;if("!=="===n)return t!==e;if("!="===n||"not equal"===n)return t!=e;if(">="===n||"greater or equal"===n||"equal or greater"===n)return t<=e;if("<="===n||"smaller or equal"===n||"equal or smaller"===n)return e<=t;if(">"===n||"greater"===n)return t<e;if("<"===n||"smaller"===n)return e<t;if("contains"===n||"in"===n){if(_.isArray(t)&&_.isArray(e))return _.each(e,function(e){if(t.includes(e))return!(found=!0)}),found;if(_.isArray(e))return _.each(e,function(e){e==t&&(found=!0)}),found;if(_.isObject(e))return _.isUndefined(e[t])||(found=!0),_.each(e,function(e){t===e&&(found=!0)}),found;if(_.isString(e))return _.isString(t)?-1<t.indexOf(e)&&-1<e.indexOf(t):-1<t.indexOf(e)}return t==e},this.init()};f(document).on("widget-added widget-updated",function(e,t){new i(t)}),f(document).ready(function(){new i}),void 0!==(r=wp.customize)&&r.bind("ready",function(){r.section.each(function(e){"widgets"===e.params.panel&&e.expanded.bind(function(e){e&&new i})})});(f(".js-reyajaxfilters-migrate").on("click",function(e){e.preventDefault();var a=f(this);a.addClass("--loading"),f.ajax({url:reyCoreAdmin.ajax_url,cache:!1,data:{action:"rey_ajaxfilters_migrate",security:reyCoreAdmin.ajax_nonce},success:function(e){e?1==e.success?(a.text("Deactivating plugin.."),f.ajax({url:reyCoreAdmin.ajax_url,cache:!1,data:{action:"rey_ajaxfilters_deactivate_wcapf",security:reyCoreAdmin.ajax_nonce},success:function(e){e?1==e.success&&(a.text("Reloading page.."),setTimeout(function(){window.location.reload()},1500)):console.error("Response cannot be retrieved")},error:function(e,t,n){a.removeClass("--loading").text("Something went wrong."),console.error(e),console.error(t),console.error(n)}})):(a.removeClass("--loading"),f("<p>Problem migrating: "+e.data.join(", ")+". Please reload and retry.</p>").insertAfter(a)):console.error("Response cannot be retrieved")},error:function(e,t,n){a.removeClass("--loading").text("Something went wrong."),console.error(e),console.error(t),console.error(n)}})}),function(e,t){for(var n=e.split("."),a=t.split("."),r=0;r<n.length;++r)n[r]=Number(n[r]);for(r=0;r<a.length;++r)a[r]=Number(a[r]);return 2==n.length&&(n[2]=0),n[0]>a[0]||!(n[0]<a[0])&&(n[1]>a[1]||!(n[1]<a[1])&&(n[2]>a[2]||!(n[2]<a[2])))}(reyCoreAdmin.rey_core_version,"1.5.0"))&&f('.wp-list-table.plugins tr[data-slug="wc-ajax-product-filter"] .plugin-description > p:first-child').html("<p><strong>This plugin is deprecated, can be deleted.</strong></p>");f(".js-toggle-ocdi-settings").on("change",function(e){var t=f(e.target),n=t.closest(".rey-toggleSwitch"),a=t.attr("data-setting");n.addClass("--disabled"),f.ajax({method:"post",url:reyCoreAdmin.ajax_url,data:{action:"change_ocdi_setting",security:reyCoreAdmin.ajax_nonce,status:t.prop("checked"),setting:a},success:function(e){e&&e.data&&t.prop("checked",e.data),n.removeClass("--disabled")},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})}),f(".js-rey-demos-adjust-settings").on("click",function(e){e.preventDefault(),f(this).parent().find(".rey-demosImportSettings").toggleClass("--hidden")})}(jQuery);