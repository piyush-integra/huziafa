!function(n,t,i){"use strict";var e={activeSlide:0,totalSlides:0,settings:{},elements:{},isAnimating:!1,isInit:!1,interval:!1,timeline:void 0,sliderImages:[],activeCssClass:"--active",init:function(t){var i=this;if(this.$el=t,this.elements.$slidesContainer=n(".cDistortion-slides",this.$el),this.elements.$imgSlides=this.elements.$slidesContainer.children("img"),this.slides=JSON.parse(i.$el.attr("data-images")||"{}"),this.totalSlides=this.slides.length,!(this.totalSlides<2)&&"undefined"!=typeof THREE&&"undefined"!=typeof anime&&"undefined"!==n.reyDistortionApp){var e=function(){i.settings=n.extend({autoplay:!1,autoplayDuration:5e3,transitionDuration:1600,intensity1:.8,intensity2:.8,effect:"",easing:"easeInOutCubic",vertical:!0,scaleEffect:!1},JSON.parse(i.$el.attr("data-slider-settings")||"{}")),i.settings.autoplayDuration=parseInt(i.settings.autoplayDuration||5e3),i.settings.transitionDuration=parseInt(i.settings.transitionDuration),i.settings.intensity1=parseFloat(i.settings.intensity1),i.settings.intensity2=parseFloat(i.settings.intensity2),"random"===i.settings.effect?i.settings.effect=reyThreeConfig.displacements[n.reyHelpers.getRandomInt(15)]:""!==i.settings.effect&&(i.settings.effect=reyThreeConfig.displacements[i.settings.effect]),i.activateSlider(),i.events()};0<n.reyHelpers.$sitePreloader.length?n(document).on("rey/site_loaded",function(){e()}):n("body").hasClass("--lazyload-enabled")?this.elements.$imgSlides.on("lazyloaded",function(){e()}):this.$el.imagesLoaded(function(){e()})}},activateSlider:function(){this.elements.$slideBg=n(".cDistortion-slidesBg",this.$el),this.elements.$prevArrow=n(".cDistortion-navPrev",this.$el),this.elements.$nextArrow=n(".cDistortion-navNext",this.$el),this.elements.$bullets=n(".cDistortion-navBullets button",this.$el),this.elements.$canvasWrapper=n(".cDistortion-canvasWrapper",this.$el),this.elements.$captions=n(".cDistortion-captionItem",this.$el);var t=this.elements.$imgSlides.first();this.imgWidth=parseInt(t.attr("width")||1440),this.imgHeight=parseInt(t.attr("height")||810),this.distortionApp=new ReyDistortionApp({imgWidth:this.imgWidth,imgHeight:this.imgHeight,effect:this.settings.effect,intensity1:this.settings.intensity1,intensity2:this.settings.intensity2,vertical:this.settings.vertical,$images:this.slides,$el:this.$el}),this.elements.$canvasWrapper.append(this.distortionApp.renderer.domElement),this.elements.$canvas=n("canvas",this.$el),this.addTimeline()},events:function(){var i,s=this;(this.$el.on("rey:distortion-app:init",function(){s.$el.removeClass("--loading"),s.animateTo(s.activeSlide),setTimeout(function(){s.autoplay(),s.isInit=!0},1e3)}),this.elements.$nextArrow.on("click",function(t){t.preventDefault(),s.goToNext()}),this.elements.$prevArrow.on("click",function(t){t.preventDefault(),s.goToPrev()}),this.elements.$bullets.on("click",function(t){if(t.preventDefault(),!s.isAnimating){var i=parseInt(n(this).attr("data-index")),e=1;i!==s.activeSlide&&(i<s.activeSlide&&(e=-1),s.animateTo(i,e))}}),n(document).on("keyup",function(t){var i=t.keyCode||t.which;37===i?s.goToPrev():39===i&&s.goToNext()}),void 0!==n.reyHelpers&&n.reyHelpers.is_touch_device())&&(this.$el.on("touchstart",function(t){i=t.originalEvent.touches[0].clientX}),this.$el.on("touchend",function(t){t.originalEvent.changedTouches[0].clientX<i?s.goToPrev():s.goToNext()}))},autoplay:function(){var t=this;this.settings.autoplay&&(this.interval=setInterval(function(){t.goToNext()},this.settings.autoplayDuration+this.settings.transitionDuration))},resetAutoplay:function(){this.settings.autoplay&&this.interval&&(clearInterval(this.interval),this.autoplay())},goToNext:function(){if(!this.isAnimating){var t=this.activeSlide+1;this.activeSlide===this.totalSlides-1&&(t=0),this.animateTo(t,1)}},goToPrev:function(){if(!this.isAnimating){var t=this.activeSlide-1;0===this.activeSlide&&(t=this.totalSlides-1),this.animateTo(t,-1)}},animateTo:function(t,i){var e=this;this.resetAutoplay(),this.onAnimationStart=function(){e.isAnimating=!0,e.distortionApp.animationStart(t,i),e.activeSlide=t,e.activateBg(),e.activateBullet(),e.activateCaption()},this.onAnimationEnd=function(){e.distortionApp.animationEnd(t),e.isAnimating=!1},this.timeline&&this.timeline.play()},addTimeline:function(){var i=this;this.timeline=anime.timeline({autoplay:!1,begin:function(t){i.onAnimationStart()},complete:function(t){i.onAnimationEnd()}});var t="";if(this.settings.scaleEffect){t="-=500";this.timeline.add({targets:this.elements.$canvasWrapper[0],scale:[1,1.03],easing:"easeOutSine",duration:300})}this.timeline.add({targets:i.distortionApp.mat.uniforms.dispFactor,value:1,easing:this.settings.easing,duration:this.settings.transitionDuration},t),this.settings.scaleEffect&&this.timeline.add({targets:this.elements.$canvasWrapper[0],scale:[1.03,1],easing:"easeOutCirc",duration:2e3},"-="+this.settings.transitionDuration/4)},activateBullet:function(){this.elements.$bullets.removeClass(this.activeCssClass),this.elements.$bullets.eq(this.activeSlide).addClass(this.activeCssClass)},activateCaption:function(){var t=this;this.elements.$captions.removeClass(this.activeCssClass),setTimeout(function(){t.elements.$captions.eq(t.activeSlide).addClass(t.activeCssClass)},this.settings.transitionDuration/4)},activateBg:function(){this.$el.css({"transition-duration":this.settings.transitionDuration/2+"ms",color:this.slides[this.activeSlide].color}),this.elements.$slideBg.css({"background-color":this.slides[this.activeSlide]["bg-color"],"transition-duration":this.settings.transitionDuration/2+"ms"})}};n(window).on("elementor/frontend/init",function(){t.hooks.addAction("frontend/element_ready/reycore-cover-distortion.default",function(t,i){e.init(i(".rey-coverDistortion",t))})})}(jQuery,window.elementorFrontend,window.elementorModules);